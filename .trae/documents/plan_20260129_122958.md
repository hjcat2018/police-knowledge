# 文档上传minio及来源时间功能实现

## Minio配置
- endpoint: http://192.168.6.201:9000
- accessKey: admin
- secretKey: admin123
- bucketName: glza

## 实施计划

### 1. 后端实现

#### 1.1 Minio配置类
**新建文件：** `MinioConfig.java`
- 配置minio连接信息
- 创建MinioClient实例

#### 1.2 Minio服务类
**新建文件：** `MinioService.java`
- `uploadFile()`: 上传文件到minio，返回URL
- `deleteFile()`: 删除minio文件
- 生成唯一文件名防止冲突

#### 1.3 实体类修改
**修改文件：** `Document.java`
- 添加 `sourceTime` 字段（LocalDateTime）
- 添加 `docUrl` 字段（String）

#### 1.4 DTO修改
**修改文件：** `DocumentDTO.java`
- 添加 `sourceTime` 字段
- 添加 `docUrl` 字段

#### 1.5 VO修改
**修改文件：** `DocumentVO.java`
- 添加 `sourceTime` 字段
- 添加 `docUrl` 字段

#### 1.6 新增解析并上传接口
**修改文件：** `DocumentController.java`
- 新增 `parseAndUploadFile` 接口
- 同时上传文件到minio和解析文件内容
- 返回minioUrl、sourceTime和解析内容

#### 1.7 修改文档创建/更新逻辑
**修改文件：** `DocumentServiceImpl.java`
- `createDocument()`: 处理sourceTime和docUrl
- `updateDocument()`: 处理sourceTime和docUrl

#### 1.8 Service接口
**修改文件：** `DocumentService.java`
- 在接口中添加对应方法声明

### 2. 前端实现

#### 2.1 API接口修改
**修改文件：** `doc/index.ts`
- 在Document接口中添加 `sourceTime` 和 `docUrl` 字段

#### 2.2 文档对话框修改
**修改文件：** `DocDialog.vue`
- 添加"来源时间"日期选择器
- 修改`handleParseFile`方法调用新的接口
- 保存minioUrl和sourceTime
- 表单提交时包含新字段

#### 2.3 文档详情组件
**修改文件：** `DocDetailDialog.vue`
- 显示来源时间
- 显示文档地址链接（可点击跳转）

## 预期效果
- 用户上传文档时，文件自动保存到minio
- 来源时间由用户填写
- 文档详情可点击跳转到原始文档
- 解析失败不影响文件上传

