{
  "name": "PoliceKB Backend Development",
  "description": "å…¬å®‰ä¸“ç½‘çŸ¥è¯†åº“ç³»ç»Ÿåç«¯å¼€å‘è§„èŒƒå’Œæµç¨‹æŒ‡å— - åŒ…å«Spring Boot 3.5.7ã€Java 17ã€MyBatis-Plusã€Sa-Tokenã€SeekDBå‘é‡åº“çš„å®Œæ•´å¼€å‘è§„èŒƒ",
  "version": "1.0.0",
  "author": "Development Team",
  "lastUpdated": "2026-01-31",
  "tags": ["spring-boot", "java", "mybatis-plus", "sa-token", "seekdb", "rag", "knowledge-base"],
  "context": {
    "project": {
      "name": "Police Knowledge Base System",
      "fullName": "å…¬å®‰ä¸“ç½‘çŸ¥è¯†åº“ç³»ç»Ÿ",
      "type": "Spring Boot 3.5.7 Application",
      "language": "Java 17",
      "description": "é¢å‘åŸºå±‚æ°‘è­¦çš„æ™ºèƒ½çŸ¥è¯†åº“ç®¡ç†å¹³å°ï¼ŒåŸºäºRAGæŠ€æœ¯å’ŒSeekDBå‘é‡æ•°æ®åº“å®ç°è¯­ä¹‰æœç´¢å’Œæ™ºèƒ½é—®ç­”"
    },
    "technologyStack": {
      "core": {
        "springBoot": {
          "version": "3.5.7",
          "description": "åç«¯åº”ç”¨æ¡†æ¶"
        },
        "java": {
          "version": "17+",
          "description": "å¼€å‘è¯­è¨€"
        },
        "mybatisPlus": {
          "version": "3.5.5",
          "description": "ORMæ¡†æ¶",
          "docs": "https://baomidou.com/"
        },
        "saToken": {
          "version": "1.38.0",
          "description": "è®¤è¯æˆæƒæ¡†æ¶",
          "docs": "https://sa-token.dev33.cn/"
        }
      },
      "database": {
        "mysql": {
          "version": "8.0+",
          "description": "å…³ç³»æ•°æ®åº“"
        },
        "oceanbase": {
          "version": "4.x+",
          "description": "åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆå…¼å®¹MySQLï¼‰"
        },
        "redis": {
          "version": "7.x",
          "description": "ç¼“å­˜å’Œä¼šè¯å­˜å‚¨"
        },
        "seekdb": {
          "version": "latest",
          "description": "OceanBaseå‘é‡æ•°æ®åº“",
          "docs": "https://www.oceanbase.ai/zh-CN"
        }
      },
      "ai": {
        "springAiAlibaba": {
          "version": "1.1.0.0",
          "description": "AIèƒ½åŠ›é›†æˆæ¡†æ¶",
          "docs": "https://java2ai.com/"
        },
        "dashscope": {
          "description": "é˜¿é‡Œäº‘DashScopeå¤§è¯­è¨€æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹"
        }
      },
      "documentation": {
        "knife4j": {
          "version": "4.4.0",
          "description": "APIæ¥å£æ–‡æ¡£ç”Ÿæˆ",
          "docs": "https://doc.xiaominfo.com/",
          "url": "http://localhost:8080/doc.html"
        }
      },
      "storage": {
        "minio": {
          "description": "å¯¹è±¡å­˜å‚¨æœåŠ¡"
        }
      },
      "utilities": {
        "hutool": {
          "version": "5.8.24",
          "description": "å·¥å…·ç±»åº“"
        },
        "lombok": {
          "version": "1.18.32",
          "description": "ä»£ç ç®€åŒ–å·¥å…·"
        },
        "ansj": {
          "version": "5.1.6",
          "description": "ä¸­æ–‡åˆ†è¯åº“"
        },
        "pdfbox": {
          "version": "3.0.1",
          "description": "PDFè§£æ"
        },
        "poi": {
          "version": "5.2.5",
          "description": "Word/Excelè§£æ"
        }
      }
    },
    "projectStructure": {
      "root": "backend/",
      "sourceCode": "src/main/java/com/police/kb/",
      "testCode": "src/test/java/com/police/kb/",
      "resources": "src/main/resources/",
      "sql": "sql/",
      "modules": {
        "common": {
          "description": "å…¬å…±ç»„ä»¶",
          "files": ["Result.java", "ErrorCode.java", "GlobalExceptionHandler.java", "ChineseSegmenter.java"]
        },
        "config": {
          "description": "é…ç½®ç±»",
          "files": ["MybatisPlusConfig.java", "SaTokenConfig.java", "RedisConfig.java", "SeekDBConfig.java", "JacksonConfig.java", "MinioConfig.java", "BatchProcessingConfig.java"]
        },
        "controller": {
          "description": "æ§åˆ¶å™¨å±‚",
          "files": ["AuthController.java", "UserController.java", "KnowledgeBaseController.java", "DocumentController.java", "SearchController.java", "ConversationController.java", "StreamChatController.java", "SystemController.java", "VectorController.java"]
        },
        "dto": {
          "description": "æ•°æ®ä¼ è¾“å¯¹è±¡",
          "files": ["LoginRequest.java", "LoginResponse.java", "ChangePasswordRequest.java", "UserInfoDTO.java", "KnowledgeBaseDTO.java", "DocumentDTO.java"]
        },
        "entity": {
          "description": "å®ä½“ç±»",
          "files": ["BaseEntity.java", "User.java", "Document.java", "KnowledgeBase.java", "Category.java", "Conversation.java", "Message.java", "DocumentVector.java", "Role.java", "Permission.java", "UserRole.java", "RolePermission.java"]
        },
        "mapper": {
          "description": "Mapperæ¥å£",
          "files": ["UserMapper.java", "DocumentMapper.java", "KnowledgeBaseMapper.java", "ConversationMapper.java", "MessageMapper.java", "RoleMapper.java", "PermissionMapper.java", "CategoryMapper.java", "DocumentVectorMapper.java", "UserRoleMapper.java", "RolePermissionMapper.java"]
        },
        "service": {
          "description": "æœåŠ¡æ¥å£",
          "files": ["AuthService.java", "UserService.java", "KnowledgeBaseService.java", "DocumentService.java", "VectorService.java", "RagService.java", "FileParseService.java", "ConversationService.java", "DocumentChunkingService.java", "UserRoleService.java", "MinioService.java"]
        },
        "serviceImpl": {
          "description": "æœåŠ¡å®ç°ç±»",
          "files": ["AuthServiceImpl.java", "UserServiceImpl.java", "KnowledgeBaseServiceImpl.java", "DocumentServiceImpl.java", "VectorServiceImpl.java", "RagServiceImpl.java", "FileParseServiceImpl.java", "ConversationServiceImpl.java", "UserRoleServiceImpl.java"]
        },
        "vo": {
          "description": "è§†å›¾å¯¹è±¡",
          "files": ["SearchResult.java", "DocumentVO.java", "KnowledgeBaseVO.java", "ChatMessage.java", "RagAnswer.java"]
        }
      }
    },
    "databaseSchema": {
      "tables": {
        "user": "ç”¨æˆ·è¡¨",
        "knowledge_base": "çŸ¥è¯†åº“è¡¨",
        "document": "æ–‡æ¡£è¡¨",
        "document_vectors": "æ–‡æ¡£å‘é‡è¡¨",
        "conversation": "å¯¹è¯è¡¨",
        "chat_message": "èŠå¤©æ¶ˆæ¯è¡¨",
        "role": "è§’è‰²è¡¨",
        "permission": "æƒé™è¡¨",
        "user_role": "ç”¨æˆ·è§’è‰²å…³è”è¡¨",
        "role_permission": "è§’è‰²æƒé™å…³è”è¡¨",
        "category": "åˆ†ç±»è¡¨",
        "audit_log": "å®¡è®¡æ—¥å¿—è¡¨"
      },
      "relationships": {
        "user_role_many_to_many": "ç”¨æˆ·-è§’è‰²å¤šå¯¹å¤šå…³ç³»",
        "role_permission_many_to_many": "è§’è‰²-æƒé™å¤šå¯¹å¤šå…³ç³»",
        "kb_document_one_to_many": "çŸ¥è¯†åº“-æ–‡æ¡£ä¸€å¯¹å¤šå…³ç³»",
        "document_vector_many_to_one": "æ–‡æ¡£å‘é‡-æ–‡æ¡£å¤šå¯¹ä¸€å…³ç³»",
        "conversation_message_one_to_many": "å¯¹è¯-æ¶ˆæ¯ä¸€å¯¹å¤šå…³ç³»"
      }
    }
  },
  "guidelines": {
    "codeStandards": {
      "naming": {
        "class": {
          "rule": "PascalCase",
          "examples": ["UserController", "DocumentService", "KnowledgeBaseDTO"],
          "description": "ç±»åã€æ¥å£åä½¿ç”¨å¤§é©¼å³°å‘½å"
        },
        "method": {
          "rule": "camelCase",
          "examples": ["getUserById", "findDocuments", "saveDocument"],
          "description": "æ–¹æ³•åã€å˜é‡åä½¿ç”¨å°é©¼å³°å‘½å"
        },
        "variable": {
          "rule": "camelCase",
          "examples": ["userName", "documentList", "pageSize"],
          "description": "å±€éƒ¨å˜é‡ã€æˆå‘˜å˜é‡ä½¿ç”¨å°é©¼å³°å‘½å"
        },
        "constant": {
          "rule": "UPPER_SNAKE_CASE",
          "examples": ["MAX_PAGE_SIZE", "DEFAULT_BATCH_SIZE", "TOKEN_TIMEOUT"],
          "description": "å¸¸é‡ä½¿ç”¨å…¨å¤§å†™ä¸‹åˆ’çº¿åˆ†éš”"
        },
        "package": {
          "rule": "lowercase",
          "examples": ["com.police.kb.controller", "com.police.kb.service"],
          "description": "åŒ…åä½¿ç”¨å…¨å°å†™"
        },
        "databaseField": {
          "rule": "snake_case",
          "examples": ["user_name", "created_time", "last_login_ip"],
          "description": "æ•°æ®åº“å­—æ®µä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”"
        }
      },
      "javaDoc": {
        "classDocumentation": {
          "required": true,
          "template": "/**\n * ç±»åŠŸèƒ½ç®€è¦æè¿°\n * <p>è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰</p>\n * @author ä½œè€…å\n * @date æ—¥æœŸæ—¶é—´\n */",
          "example": "/**\n * è®¤è¯æ§åˆ¶å™¨\n * <p>\n * å¤„ç†ç”¨æˆ·è®¤è¯ç›¸å…³çš„è¯·æ±‚ï¼ŒåŒ…æ‹¬ç™»å½•ã€ç™»å‡ºã€å¯†ç ä¿®æ”¹ã€è·å–ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚\n * </p>\n * @author é»„ä¿Š\n * @date 2026-01-23 12:00:00\n */"
        },
        "methodDocumentation": {
          "required": true,
          "template": "/**\n * æ–¹æ³•åŠŸèƒ½æè¿°\n * @param å‚æ•°å å‚æ•°è¯´æ˜\n * @return è¿”å›å€¼è¯´æ˜\n * @throws å¼‚å¸¸ç±»å‹ å¼‚å¸¸è¯´æ˜ï¼ˆå¯é€‰ï¼‰\n */",
          "example": "/**\n * ç”¨æˆ·ç™»å½•\n * <p>\n * éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œåˆ›å»ºç™»å½•ä¼šè¯ï¼Œè¿”å›Tokenå’Œç”¨æˆ·ä¿¡æ¯ã€‚\n * </p>\n * @param request ç™»å½•è¯·æ±‚å‚æ•°\n * @return ç™»å½•å“åº”ç»“æœ\n * @throws RuntimeException ç™»å½•å¤±è´¥æ—¶æŠ›å‡º\n */"
        },
        "fieldDocumentation": {
          "required": false,
          "template": "/** å­—æ®µæè¿° */",
          "example": "/** çŠ¶æ€ç  */\nprivate Integer code;"
        },
        "annotations": {
          "author": {
            "description": "ä½œè€…å§“å",
            "format": "ä¸­æ–‡å§“å"
          },
          "date": {
            "description": "åˆ›å»ºæˆ–ä¿®æ”¹æ—¥æœŸ",
            "format": "yyyy-MM-dd HH:mm:ss"
          },
          "param": {
            "description": "æ–¹æ³•å‚æ•°è¯´æ˜",
            "format": "@param å‚æ•°å å‚æ•°æè¿°"
          },
          "return": {
            "description": "è¿”å›å€¼è¯´æ˜",
            "format": "@return è¿”å›å€¼æè¿°"
          },
          "throws": {
            "description": "å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸",
            "format": "@throws å¼‚å¸¸ç±»å‹ å¼‚å¸¸è¯´æ˜"
          },
          "see": {
            "description": "å‚è€ƒé“¾æ¥",
            "format": "@see é“¾æ¥æˆ–ç±»å"
          },
          "since": {
            "description": "èµ·å§‹ç‰ˆæœ¬",
            "format": "@since ç‰ˆæœ¬å·"
          }
        }
      },
      "annotations": {
        "class": {
          "@RestController": "Resté£æ ¼æ§åˆ¶å™¨",
          "@Service": "æœåŠ¡å±‚ç»„ä»¶",
          "@Repository": "æ•°æ®è®¿é—®å±‚ç»„ä»¶",
          "@Component": "é€šç”¨ç»„ä»¶",
          "@Configuration": "é…ç½®ç±»"
        },
        "method": {
          "@GetMapping": "GETè¯·æ±‚æ˜ å°„",
          "@PostMapping": "POSTè¯·æ±‚æ˜ å°„",
          "@PutMapping": "PUTè¯·æ±‚æ˜ å°„",
          "@DeleteMapping": "DELETEè¯·æ±‚æ˜ å°„"
        },
        "parameter": {
          "@RequestParam": "è¯·æ±‚å‚æ•°",
          "@RequestBody": "è¯·æ±‚ä½“",
          "@PathVariable": "è·¯å¾„å˜é‡"
        },
        "validation": {
          "@Valid": "å‚æ•°æ ¡éªŒ",
          "@NotNull": "ä¸èƒ½ä¸ºç©º",
          "@NotBlank": "ä¸èƒ½ä¸ºç©ºç™½",
          "@Size": "å¤§å°é™åˆ¶"
        },
        "lombok": {
          "@Data": "ç”Ÿæˆgetter/setter/toString/equals/hashCode",
          "@Builder": "æ„å»ºè€…æ¨¡å¼",
          "@AllArgsConstructor": "å…¨å‚æ„é€ å‡½æ•°",
          "@NoArgsConstructor": "æ— å‚æ„é€ å‡½æ•°",
          "@RequiredArgsConstructor": "å¿…éœ€å‚æ•°æ„é€ å‡½æ•°"
        },
        "mybatisPlus": {
          "@TableName": "æŒ‡å®šè¡¨å",
          "@TableId": "æŒ‡å®šä¸»é”®",
          "@TableField": "æŒ‡å®šå­—æ®µæ˜ å°„",
          "@TableLogic": "é€»è¾‘åˆ é™¤"
        }
      },
      "inlineComments": {
        "description": "è¡Œå†…æ³¨é‡Šè§„èŒƒ",
        "rules": [
          "å¤æ‚é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Šè¯´æ˜",
          "æ³¨é‡Šä¸ä»£ç ä¿æŒåŒä¸€ç¼©è¿›",
          "ä½¿ç”¨ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œä¿æŒé¡¹ç›®ä¸€è‡´æ€§",
          "é¿å…æ³¨é‡Šæ˜¾è€Œæ˜“è§çš„ä»£ç "
        ],
        "examples": {
          "simple": "// è®¡ç®—ç”¨æˆ·å¹´é¾„\nint age = calculateAge(birthDate);",
          "complex": "// å¦‚æœç”¨æˆ·å·²ç™»å½•ä¸”è§’è‰²ä¸ºç®¡ç†å‘˜ï¼Œåˆ™æˆäºˆå…¨éƒ¨æƒé™\nif (StpUtil.isLogin() && userRole.equals(\"admin\")) {\n    permissions = getAllPermissions();\n}"
        }
      }
    },
    "architecturePattern": {
      "description": "åˆ†å±‚æ¶æ„è®¾è®¡æ¨¡å¼",
      "layers": [
        {
          "name": "Controller",
          "location": "com.police.kb.controller",
          "responsibility": "HTTPè¯·æ±‚å¤„ç†ã€å‚æ•°æ ¡éªŒã€è°ƒç”¨Serviceã€è¿”å›å“åº”",
          "rules": [
            "ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘",
            "åªå¤„ç†HTTPç›¸å…³é€»è¾‘",
            "ä½¿ç”¨@RequiredArgsConstructoræ³¨å…¥ä¾èµ–",
            "è¿”å›Result<T>ç»Ÿä¸€å“åº”"
          ],
          "example": "@RestController\n@RequestMapping(\"/api/v1/users\")\n@RequiredArgsConstructor\npublic class UserController {\n    private final UserService userService;\n}"
        },
        {
          "name": "Service",
          "location": "com.police.kb.service",
          "responsibility": "ä¸šåŠ¡é€»è¾‘å®ç°ã€äº‹åŠ¡ç®¡ç†ã€ä¸šåŠ¡è§„åˆ™æ ¡éªŒ",
          "rules": [
            "å¤„ç†ä¸šåŠ¡é€»è¾‘",
            "ä½¿ç”¨@Transactionalç®¡ç†äº‹åŠ¡",
            "å°è£…ä¸šåŠ¡è§„åˆ™",
            "è°ƒç”¨Repositoryè¿›è¡Œæ•°æ®è®¿é—®"
          ],
          "example": "public interface UserService extends IService<User> {\n    User getByUsername(String username);\n}"
        },
        {
          "name": "Repository",
          "location": "com.police.kb.repository",
          "responsibility": "æ•°æ®è®¿é—®ã€SQLæ“ä½œ",
          "rules": [
            "ç»§æ‰¿BaseMapperæˆ–è‡ªå®šä¹‰Mapper",
            "å®šä¹‰æ•°æ®è®¿é—®æ–¹æ³•",
            "ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘"
          ],
          "example": "@Mapper\npublic interface UserMapper extends BaseMapper<User> {\n    User selectByUsername(String username);\n}"
        },
        {
          "name": "Entity",
          "location": "com.police.kb.entity",
          "responsibility": "æ•°æ®å®ä½“ã€æ•°æ®åº“æ˜ å°„",
          "rules": [
            "ä¸æ•°æ®åº“è¡¨å¯¹åº”",
            "ä½¿ç”¨Lombokæ³¨è§£",
            "ç»§æ‰¿BaseEntityè·å–å…¬å…±å­—æ®µ"
          ],
          "example": "@Data\n@TableName(\"user\")\npublic class User extends BaseEntity {\n    private String username;\n    private String password;\n}"
        }
      ]
    },
    "apiDesign": {
      "basePath": "/api/v1/{module}/{action}",
      "responseFormat": {
        "success": {
          "code": 200,
          "message": "æ“ä½œæˆåŠŸ",
          "description": "æˆåŠŸå“åº”"
        },
        "error": {
          "code": 500,
          "message": "é”™è¯¯ä¿¡æ¯",
          "description": "é”™è¯¯å“åº”"
        },
        "unauthorized": {
          "code": 401,
          "message": "æœªæˆæƒ",
          "description": "æœªç™»å½•æˆ–Tokenæ— æ•ˆ"
        },
        "forbidden": {
          "code": 403,
          "message": "ç¦æ­¢è®¿é—®",
          "description": "æ— æƒé™è®¿é—®"
        },
        "notFound": {
          "code": 404,
          "message": "èµ„æºä¸å­˜åœ¨",
          "description": "èµ„æºæœªæ‰¾åˆ°"
        }
      },
      "responseStructure": {
        "fields": {
          "code": "çŠ¶æ€ç ï¼ˆ200æˆåŠŸï¼Œ4xxå®¢æˆ·ç«¯é”™è¯¯ï¼Œ5xxæœåŠ¡å™¨é”™è¯¯ï¼‰",
          "message": "æç¤ºä¿¡æ¯",
          "data": "å“åº”æ•°æ®ï¼ˆæ³›å‹ï¼‰",
          "timestamp": "å“åº”æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰"
        },
        "example": {
          "success": "{\"code\": 200, \"message\": \"æ“ä½œæˆåŠŸ\", \"data\": {...}, \"timestamp\": 1737561600000}",
          "error": "{\"code\": 500, \"message\": \"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯\", \"data\": null, \"timestamp\": 1737561600000}"
        }
      },
      "pagination": {
        "request": {
          "pageNum": "é¡µç ï¼ˆä»1å¼€å§‹ï¼‰",
          "pageSize": "æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰"
        },
        "response": {
          "records": "æ•°æ®åˆ—è¡¨",
          "total": "æ€»è®°å½•æ•°",
          "pageNum": "å½“å‰é¡µç ",
          "pageSize": "æ¯é¡µæ•°é‡"
        },
        "example": {
          "request": "?pageNum=1&pageSize=10",
          "response": "{\"code\": 200, \"message\": \"æ“ä½œæˆåŠŸ\", \"data\": {\"records\": [...], \"total\": 100, \"pageNum\": 1, \"pageSize\": 10}}"
        }
      },
      "modules": {
        "auth": "/api/v1/auth",
        "user": "/api/v1/users",
        "knowledgeBase": "/api/v1/kb",
        "document": "/api/v1/documents",
        "search": "/api/v1/search",
        "vector": "/api/v1/vector",
        "conversation": "/api/v1/conversations",
        "chat": "/api/v1/chat",
        "system": "/api/v1/system"
      }
    },
    "apiVersioning": {
      "description": "APIç‰ˆæœ¬ç®¡ç†è§„èŒƒ",
      "urlVersioning": {
        "format": "/api/v{version}/{module}/{action}",
        "examples": ["/api/v1/user/login", "/api/v2/user/login"],
        "description": "URLè·¯å¾„ä¸­åŒ…å«ç‰ˆæœ¬å·"
      },
      "headerVersioning": {
        "headerName": "X-API-Version",
        "examples": ["X-API-Version: v1", "X-API-Version: v2"],
        "description": "é€šè¿‡è¯·æ±‚å¤´æŒ‡å®šç‰ˆæœ¬"
      },
      "backwardCompatibility": {
        "principles": [
          "æ–°å¢å­—æ®µæ”¾åœ¨JSONæœ«å°¾",
          "ä¸åˆ é™¤å·²æœ‰å­—æ®µ",
          "ä¸ä¿®æ”¹å­—æ®µå«ä¹‰",
          "è°¨æ…ä¿®æ”¹å­—æ®µç±»å‹"
        ]
      },
      "deprecationStrategy": {
        "annotation": "@Deprecated",
        "noticePeriod": "è‡³å°‘ä¿ç•™2ä¸ªå°ç‰ˆæœ¬",
        "documentation": "å¿…é¡»æ³¨é‡ŠåºŸå¼ƒåŸå› å’Œæ›¿ä»£æ–¹æ¡ˆ",
        "monitoring": "ç›‘æ§åºŸå¼ƒAPIè°ƒç”¨é‡"
      }
    },
    "databaseDesign": {
      "entityMapping": {
        "description": "Entityä¸æ•°æ®åº“è¡¨æ˜ å°„è§„èŒƒ",
        "rules": [
          "ä½¿ç”¨@TableNameæŒ‡å®šè¡¨åï¼ˆé»˜è®¤ç±»åè½¬ä¸‹åˆ’çº¿ï¼‰",
          "ä½¿ç”¨@TableIdæŒ‡å®šä¸»é”®å­—æ®µ",
          "ä½¿ç”¨@TableFieldæ˜ å°„ç‰¹æ®Šå­—æ®µ",
          "å­—æ®µåä½¿ç”¨é©¼å³°è½¬ä¸‹åˆ’çº¿è‡ªåŠ¨æ˜ å°„"
        ],
        "example": "@Data\n@TableName(\"user\")\npublic class User extends BaseEntity {\n    @TableId(type = IdType.AUTO)\n    private Long id;\n    private String username;\n    @TableField(select = false)\n    private String password;\n}"
      },
      "primaryKeyStrategy": {
        "autoIncrement": {
          "description": "è‡ªå¢ä¸»é”®",
          "useCase": "å•æœºMySQLç¯å¢ƒ",
          "example": "@TableId(type = IdType.AUTO)"
        },
        "snowflake": {
          "description": "é›ªèŠ±ç®—æ³•åˆ†å¸ƒå¼ID",
          "useCase": "åˆ†å¸ƒå¼ç¯å¢ƒã€é«˜å¹¶å‘",
          "example": "@TableId(type = IdType.ASSIGN_ID)"
        },
        "currentSetting": "è‡ªå¢ä¸»é”®ï¼ˆMyBatis-Plusé»˜è®¤ï¼ŒAUTOç­–ç•¥ï¼‰"
      },
      "baseEntity": {
        "description": "åŸºç¡€å®ä½“ç±»åŒ…å«å…¬å…±å­—æ®µ",
        "fields": [
          "id - ä¸»é”®ID",
          "createdTime - åˆ›å»ºæ—¶é—´",
          "createdBy - åˆ›å»ºäººID",
          "updatedTime - æ›´æ–°æ—¶é—´",
          "updatedBy - ä¿®æ”¹äººID",
          "deleted - åˆ é™¤æ ‡è¯†ï¼ˆé€»è¾‘åˆ é™¤ï¼‰"
        ],
        "example": "@Data\npublic abstract class BaseEntity implements Serializable {\n    @TableId(type = IdType.AUTO)\n    private Long id;\n    @TableField(fill = FieldFill.INSERT)\n    private LocalDateTime createdTime;\n    @TableField(fill = FieldFill.INSERT)\n    private Long createdBy;\n    @TableField(fill = FieldFill.INSERT_UPDATE)\n    private LocalDateTime updatedTime;\n    @TableField(fill = FieldFill.INSERT_UPDATE)\n    private Long updatedBy;\n    @TableLogic\n    private Integer deleted;\n}"
      },
      "softDelete": {
        "description": "é€»è¾‘åˆ é™¤å®ç°æ–¹å¼",
        "implementation": "ä½¿ç”¨@TableLogicæ³¨è§£",
        "field": "deletedå­—æ®µï¼ˆTINYINTç±»å‹ï¼Œ0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤ï¼‰",
        "advantages": ["æ•°æ®å¯æ¢å¤", "å®¡è®¡è¿½è¸ª", "ç¬¦åˆæ•°æ®åˆè§„è¦æ±‚"],
        "example": "@TableLogic\nprivate Integer deleted;"
      },
      "indexDesign": {
        "singleColumnIndex": {
          "description": "å•åˆ—ç´¢å¼•è§„èŒƒ",
          "guidelines": "å¸¸ç”¨äºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µå»ºç«‹ç´¢å¼•"
        },
        "compositeIndex": {
          "description": "è”åˆç´¢å¼•è§„èŒƒ",
          "principle": "æœ€å·¦å‰ç¼€åŸåˆ™",
          "order": "åŒºåˆ†åº¦é«˜çš„å­—æ®µæ”¾å‰é¢"
        },
        "indexNaming": {
          "primary": "idx_{table_name}_{field_name}",
          "unique": "uk_{table_name}_{field_name}"
        },
        "optimization": "é¿å…è¿‡å¤šç´¢å¼•ï¼Œå®šæœŸæ¸…ç†æ— ç”¨ç´¢å¼•"
      }
    },
    "errorHandling": {
      "globalExceptionHandler": {
        "class": "GlobalExceptionHandler.java",
        "location": "com.police.kb.common",
        "features": ["ç»Ÿä¸€å“åº”æ ¼å¼", "å¼‚å¸¸æ—¥å¿—è®°å½•", "å¼‚å¸¸åˆ†ç±»å¤„ç†"],
        "example": "@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    @ExceptionHandler(BusinessException.class)\n    public Result<Void> handleBusinessException(BusinessException e) {\n        log.error(\"ä¸šåŠ¡å¼‚å¸¸: {}\", e.getMessage());\n        return Result.error(e.getCode(), e.getMessage());\n    }\n}"
      },
      "customExceptions": {
        "BusinessException": {
          "description": "ä¸šåŠ¡å¼‚å¸¸",
          "useCase": "å¯é¢„è§çš„ä¸šåŠ¡é”™è¯¯",
          "examples": ["ç”¨æˆ·åä¸å­˜åœ¨", "ä½™é¢ä¸è¶³", "æƒé™ä¸è¶³"]
        },
        "SystemException": {
          "description": "ç³»ç»Ÿå¼‚å¸¸",
          "useCase": "ç³»ç»Ÿçº§é”™è¯¯",
          "examples": ["æ•°æ®åº“è¿æ¥å¤±è´¥", "ç©ºæŒ‡é’ˆå¼‚å¸¸"]
        },
        "ValidationException": {
          "description": "å‚æ•°æ ¡éªŒå¼‚å¸¸",
          "useCase": "è¯·æ±‚å‚æ•°ä¸åˆæ³•"
        }
      },
      "errorCodeSystem": {
        "success": 200,
        "clientError": {
          "badRequest": 400,
          "unauthorized": 401,
          "forbidden": 403,
          "notFound": 404
        },
        "serverError": 500,
        "customCodes": {
          "10001": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
          "10002": "ç”¨æˆ·å·²è¢«ç¦ç”¨",
          "10003": "Tokenå·²è¿‡æœŸ"
        }
      },
      "exceptionClassification": {
        "businessExceptions": {
          "description": "ä¸šåŠ¡å¼‚å¸¸",
          "handling": "è¿”å›ä¸šåŠ¡é”™è¯¯ç å’Œæç¤ºä¿¡æ¯",
          "logging": "WARNçº§åˆ«"
        },
        "systemExceptions": {
          "description": "ç³»ç»Ÿå¼‚å¸¸",
          "handling": "è¿”å›é€šç”¨é”™è¯¯ä¿¡æ¯",
          "logging": "ERRORçº§åˆ«ï¼ŒåŒ…å«å®Œæ•´å †æ ˆ"
        }
      },
      "errorLogging": {
        "level": "ERROR",
        "content": ["å¼‚å¸¸å †æ ˆä¿¡æ¯", "è¯·æ±‚å‚æ•°", "ç”¨æˆ·ID", "è¯·æ±‚è·¯å¾„"],
        "sensitiveData": "å¯†ç ã€Tokenç­‰æ•æ„Ÿä¿¡æ¯è„±æ•",
        "example": "log.error(\"ç”¨æˆ·ç™»å½•å¤±è´¥ - userId: {}, error: {}\", userId, e.getMessage(), e);"
      }
    },
    "loggingStandards": {
      "levelSelection": {
        "DEBUG": {
          "description": "è°ƒè¯•ä¿¡æ¯",
          "useCase": "å¼€å‘ç¯å¢ƒè°ƒè¯•",
          "example": "å˜é‡å€¼ã€æ–¹æ³•å…¥å‚å‡ºå‚"
        },
        "INFO": {
          "description": "ä¸šåŠ¡å…³é”®æ“ä½œ",
          "useCase": "è®°å½•é‡è¦ä¸šåŠ¡æµç¨‹",
          "examples": ["ç”¨æˆ·ç™»å½•", "æ–‡æ¡£ä¸Šä¼ ", "æœç´¢è¯·æ±‚"]
        },
        "WARN": {
          "description": "æ½œåœ¨é—®é¢˜",
          "useCase": "ä¸å½±å“åŠŸèƒ½ä½†éœ€è¦æ³¨æ„çš„æƒ…å†µ",
          "examples": ["å‚æ•°ä¸ºç©ºä½¿ç”¨é»˜è®¤å€¼", "ç¼“å­˜æœªå‘½ä¸­"]
        },
        "ERROR": {
          "description": "å½±å“åŠŸèƒ½çš„é”™è¯¯",
          "useCase": "ç³»ç»Ÿå¼‚å¸¸ã€ä¸šåŠ¡å¼‚å¸¸",
          "examples": ["æ•°æ®åº“è¿æ¥å¤±è´¥", "æ–‡ä»¶è¯»å–å¼‚å¸¸"]
        }
      },
      "formatSpecification": {
        "pattern": "[yyyy-MM-dd HH:mm:ss] [LEVEL] [ClassName] - message",
        "example": "2026-01-31 10:00:00 INFO [UserService] - ç”¨æˆ·ç™»å½•æˆåŠŸ: userId=123",
        "fields": ["æ—¶é—´", "çº§åˆ«", "ç±»å", "æ¶ˆæ¯å†…å®¹"]
      },
      "sensitiveDataMasking": {
        "password": "è„±æ•ä¸º******",
        "idCard": "è„±æ•ä¸º110***********1234",
        "phone": "è„±æ•ä¸º138****5678",
        "token": "è„±æ•ä¸ºBearer ********",
        "implementation": "åœ¨æ—¥å¿—è¾“å‡ºå‰è¿›è¡Œå¤„ç†"
      },
      "fileManagement": {
        "logFiles": {
          "main": "police-kb.log",
          "spring": "spring-boot.log"
        },
        "location": "./logs/",
        "rotation": "æŒ‰æ—¥æœŸæ»šåŠ¨",
        "retention": "ä¿ç•™30å¤©",
        "size": "å•ä¸ªæ–‡ä»¶æœ€å¤§100MB"
      },
      "bestPractices": [
        "ä½¿ç”¨SLF4Jæ—¥å¿—é—¨é¢",
        "ä½¿ç”¨logå˜é‡è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥",
        "æ—¥å¿—ä¿¡æ¯è¦æœ‰æ„ä¹‰ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜",
        "å¼‚å¸¸æ—¥å¿—è¦åŒ…å«å®Œæ•´å †æ ˆä¿¡æ¯"
      ]
    },
    "securityStandards": {
      "sqlInjection": {
        "prevention": "ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆMyBatis-Plus #{}è¯­æ³•ï¼‰",
        "forbidden": "ç¦æ­¢ä½¿ç”¨${}æ‹¼æ¥SQL",
        "safe": "selectById(id) - å‚æ•°åŒ–æŸ¥è¯¢",
        "unsafe": "selectById(\"1 or 1=1\") - SQLæ³¨å…¥é£é™©",
        "note": "#{}ä¼šè¿›è¡Œé¢„ç¼–è¯‘ï¼Œ${}ä¼šç›´æ¥æ‹¼æ¥"
      },
      "xssPrevention": {
        "inputValidation": "å‚æ•°æ ¡éªŒ@Valid @NotBlankç­‰",
        "outputEncoding": "HTMLè½¬ä¹‰",
        "framework": "Spring Security XSS Filter",
        "note": "å‰ç«¯ä¹Ÿéœ€è¦åšXSSé˜²æŠ¤"
      },
      "apiRateLimiting": {
        "implementation": "Redis + ä»¤ç‰Œæ¡¶ç®—æ³•",
        "defaultLimit": "100æ¬¡/åˆ†é’Ÿ",
        "configLocation": "SeekDBConfig.javaæˆ–è‡ªå®šä¹‰é…ç½®",
        "response": "429 Too Many Requests"
      },
      "sensitiveDataEncryption": {
        "password": "BCryptåŠ å¯†å­˜å‚¨",
        "idCard": "AESåŠ å¯†å­˜å‚¨",
        "apiKeys": "ç¯å¢ƒå˜é‡ç®¡ç†",
        "databaseFields": "æ•æ„Ÿå­—æ®µåŠ å¯†å­˜å‚¨"
      },
      "passwordStorage": {
        "algorithm": "BCrypt",
        "library": "cn.hutool.crypto.digest.BCrypt",
        "verification": "BCrypt.checkpw(rawPassword, encodedPassword)",
        "encoding": "BCrypt.hashpw(password)",
        "note": "BCryptè‡ªåŠ¨åŠ ç›ï¼Œæ— éœ€é¢å¤–å¤„ç†"
      },
      "permissionChecks": {
        "grain": {
          "interface": "æ¥å£çº§æƒé™æ ¡éªŒ",
          "method": "æ–¹æ³•çº§æƒé™æ ¡éªŒ",
          "data": "æ•°æ®æ‰€å±æƒæ ¡éªŒ"
        },
        "annotation": "@PermissionCheckï¼ˆè‡ªå®šä¹‰æ³¨è§£ï¼‰",
        "examples": [
          "@SaCheckLogin - ç™»å½•æ£€æŸ¥",
          "@SaCheckPermission(\"user:list\") - æƒé™æ£€æŸ¥"
        ],
        "ownerCheck": "æ•°æ®åˆ›å»ºè€…æ‰èƒ½ä¿®æ”¹æˆ–åˆ é™¤"
      },
      "sensitiveEndpoints": {
        "login": "ç™»å½•æ¥å£éœ€è¦é™æµ",
        "changePassword": "ä¿®æ”¹å¯†ç éœ€è¦éªŒè¯æ—§å¯†ç ",
        "adminEndpoints": "ç®¡ç†å‘˜æ¥å£éœ€è¦è§’è‰²æ ¡éªŒ"
      }
    },
    "fileHandling": {
      "upload": {
        "allowedTypes": [".pdf", ".doc", ".docx", ".xls", ".xlsx", ".txt", ".md"],
        "maxSize": "100MB",
        "storage": "MinIOå¯¹è±¡å­˜å‚¨",
        "naming": "UUID + åŸå§‹æ‰©å±•å",
        "validation": "æ–‡ä»¶ç±»å‹ç™½åå•æ ¡éªŒ",
        "service": "MinioService.java"
      },
      "download": {
        "method": "æµå¼å“åº”@ResponseBody",
        "contentDisposition": "attachment; filename=\"xxx\"",
        "contentType": "æ ¹æ®æ–‡ä»¶ç±»å‹è®¾ç½®"
      },
      "minioUsage": {
        "class": "MinioService.java",
        "bucket": "police-kb-files",
        "operations": {
          "upload": "uploadFile(file, objectName)",
          "download": "downloadFile(objectName)",
          "delete": "deleteFile(objectName)",
          "list": "listObjects(prefix)"
        },
        "configuration": "MinioConfig.java"
      },
      "temporaryFileCleanup": {
        "location": "/tmp/police-kb",
        "retention": "24å°æ—¶",
        "implementation": "ScheduledTaskå®šæ—¶æ¸…ç†",
        "frequency": "æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ"
      },
      "validation": {
        "fileType": "æ ¹æ®æ–‡ä»¶å¤´ï¼ˆMagic Numberï¼‰æ ¡éªŒ",
        "fileSize": "ä¸Šä¼ å‰æ£€æŸ¥æ–‡ä»¶å¤§å°",
        "fileName": "é˜²æ­¢è·¯å¾„éå†æ”»å‡»"
      }
    },
    "batchAsyncProcessing": {
      "batchOptimization": {
        "batchSize": "50-100æ¡/æ‰¹",
        "mybatisPlusMethods": ["saveBatch()", "updateBatchById()"],
        "configuration": "BatchProcessingConfig.java",
        "example": "userService.saveBatch(userList, 100);"
      },
      "asyncExecution": {
        "annotation": "@Async",
        "executor": "è‡ªå®šä¹‰çº¿ç¨‹æ± ",
        "useCases": ["æ—¥å¿—è®°å½•", "æ¶ˆæ¯æ¨é€", "ç»Ÿè®¡æ›´æ–°", "å‘é‡é‡å»º"],
        "configuration": "@EnableAsync + ThreadPoolTaskExecutor",
        "example": "@Async\npublic void asyncProcess(List<Document> documents) {\n    // å¼‚æ­¥å¤„ç†\n}"
      },
      "scheduledTasks": {
        "annotation": "@Scheduled",
        "cronExpression": "cronè¡¨è¾¾å¼é…ç½®",
        "examples": {
          "vectorRebuild": "0 0 2 * * ? - æ¯å¤©å‡Œæ™¨2ç‚¹é‡å»ºå‘é‡",
          "logCleanup": "0 0 3 * * ? - æ¯å¤©å‡Œæ™¨3ç‚¹æ¸…ç†æ—¥å¿—",
          "cacheRefresh": "0 0 */4 * * ? - æ¯4å°æ—¶åˆ·æ–°ç¼“å­˜"
        },
        "configuration": "@EnableScheduling",
        "note": "åˆ†å¸ƒå¼ç¯å¢ƒä¸‹éœ€è¦åˆ†å¸ƒå¼é”"
      },
      "bestPractices": [
        "æ‰¹é‡æ“ä½œä½¿ç”¨äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§",
        "å¼‚æ­¥ä»»åŠ¡è¦æœ‰è¶…æ—¶æœºåˆ¶",
        "å®šæ—¶ä»»åŠ¡è¦æœ‰æ—¥å¿—è®°å½•",
        "å¤±è´¥ä»»åŠ¡è¦æœ‰é‡è¯•æœºåˆ¶"
      ]
    },
    "testingStandards": {
      "coverage": {
        "unitTest": "70%ä»¥ä¸Š",
        "integrationTest": "50%ä»¥ä¸Š",
        "total": "60%ä»¥ä¸Š",
        "criticalPath": "æ ¸å¿ƒä¸šåŠ¡æµç¨‹100%è¦†ç›–"
      },
      "mocking": {
        "framework": "Mockito",
        "mockObjects": ["Mapper", "Service", "External APIs"],
        "annotations": {
          "@Mock": "æ ‡è®°éœ€è¦Mockçš„ä¾èµ–",
          "@InjectMocks": "æ³¨å…¥Mockå¯¹è±¡åˆ°è¢«æµ‹ç±»",
          "@Spy": "éƒ¨åˆ†Mockï¼ŒçœŸå®æ–¹æ³•è°ƒç”¨"
        },
        "example": "@ExtendWith(MockitoExtension.class)\nclass UserServiceTest {\n    @Mock\n    private UserMapper userMapper;\n    @InjectMocks\n    private UserService userService;\n}"
      },
      "integrationTest": {
        "annotation": "@SpringBootTest",
        "database": "H2å†…å­˜æ•°æ®åº“æˆ–Testcontainers",
        "testProfile": "test",
        "configuration": "application-test.yml",
        "example": "@SpringBootTest\n@ActiveProfiles(\"test\")\nclass IntegrationTest { ... }"
      },
      "testData": {
        "preparation": "@BeforeEachå‡†å¤‡æµ‹è¯•æ•°æ®",
        "cleanup": "@AfterEachæ¸…ç†æµ‹è¯•æ•°æ®",
        "factory": "ä½¿ç”¨Builderæ¨¡å¼æ„å»ºæµ‹è¯•æ•°æ®",
        "example": "User testUser = User.builder()\n    .username(\"test\")\n    .password(\"123456\")\n    .build();"
      },
      "apiTest": {
        "tools": ["JUnit + MockMvc", "Postman/Newman"],
        "assertions": {
          "statusCode": "HTTPçŠ¶æ€ç éªŒè¯",
          "responseStructure": "å“åº”ç»“æ„éªŒè¯",
          "businessLogic": "ä¸šåŠ¡é€»è¾‘éªŒè¯"
        },
        "example": "mockMvc.perform(post(\"/api/v1/auth/login\")\n    .contentType(MediaType.APPLICATION_JSON)\n    .content(objectMapper.writeValueAsString(loginRequest)))\n    .andExpect(status().isOk())\n    .andExpect(jsonPath(\"$.code\").value(200));"
      },
      "testNaming": {
        "convention": "test[MethodName]_[Scenario]_[ExpectedResult]",
        "examples": [
          "testLogin_Success_ShouldReturnToken",
          "testLogin_InvalidPassword_ShouldReturnError",
          "testGetUser_NotFound_ShouldReturn404"
        ]
      }
    },
    "dockerDeployment": {
      "dockerfile": {
        "baseImage": "eclipse-temurin:17-jdk-alpine",
        "optimization": [
          "å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒä½“ç§¯",
          "érootç”¨æˆ·è¿è¡Œ",
          "å±‚ç¼“å­˜ä¼˜åŒ–"
        ],
        "example": "FROM eclipse-temurin:17-jdk-alpine AS builder\nWORKDIR /app\nCOPY target/police-kb-1.0.0.jar app.jar\nEXPOSE 8080\nENTRYPOINT [\"java\", \"-jar\", \"app.jar\"]"
      },
      "dockerCompose": {
        "services": ["app", "mysql", "redis", "minio"],
        "configuration": "docker-compose.yml",
        "example": "version: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"8080:8080\"\n    depends_on:\n      - mysql\n      - redis\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod"
      },
      "environmentManagement": {
        "file": ".env",
        "secrets": "æ•æ„Ÿä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡æ³¨å…¥",
        "example": "SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/police_kb\nSPRING_DATASOURCE_USERNAME=root\nSPRING_DATASOURCE_PASSWORD=${DB_PASSWORD}"
      },
      "healthCheck": {
        "endpoint": "/api/v1/system/health",
        "interval": "30s",
        "timeout": "10s",
        "retries": "3",
        "response": "{\"status\": \"UP\"}"
      },
      "orchestration": {
        "tools": ["Docker Compose(å¼€å‘)", "Kubernetes(ç”Ÿäº§)"],
        "replicas": "è‡³å°‘2ä¸ªå®ä¾‹ä¿è¯é«˜å¯ç”¨",
        "loadBalancer": "Nginxæˆ–äº‘è´Ÿè½½å‡è¡¡å™¨",
        "rollingUpdate": "æ»šåŠ¨æ›´æ–°ç­–ç•¥"
      },
      "dataPersistence": {
        "mysql": "./data/mysql:/var/lib/mysql",
        "redis": "./data/redis:/data",
        "minio": "./data/minio:/data"
      }
    },
    "performanceOptimization": {
      "databaseQuery": {
        "selectOptimization": "åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µï¼ˆselectä¸ªåˆ«å­—æ®µè€Œé*)",
        "indexUsage": "ç¡®ä¿æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ï¼Œé¿å…å…¨è¡¨æ‰«æ",
        "pagination": "ä½¿ç”¨limitåˆ†é¡µï¼Œé¿å…æ·±åˆ†é¡µé—®é¢˜",
        "nPlusOne": "ä½¿ç”¨æ‡’åŠ è½½æˆ–æ‰¹é‡æŸ¥è¯¢è§£å†³N+1é—®é¢˜"
      },
      "cachingStrategy": {
        "hotData": "Redisç¼“å­˜çƒ­ç‚¹æ•°æ®",
        "cacheKey": "prefix:{key}",
        "ttl": "3600ç§’ï¼ˆ1å°æ—¶ï¼‰",
        "invalidation": "æ•°æ®æ›´æ–°æ—¶æ¸…é™¤ç›¸å…³ç¼“å­˜",
        "example": "redisTemplate.opsForValue().set(\"user:\" + userId, userInfo, 3600, TimeUnit.SECONDS);"
      },
      "connectionPool": {
        "hikariCP": {
          "minimumIdle": 5,
          "maximumPoolSize": 20,
          "idleTimeout": 300000,
          "maxLifetime": 1800000,
          "connectionTimeout": 30000
        }
      },
      "loadingStrategy": {
        "lazy": {
          "description": "å»¶è¿ŸåŠ è½½",
          "implementation": "@TableField(exist=false) æ ‡è®°éæ•°æ®åº“å­—æ®µ",
          "useCase": "å…³è”æ•°æ®æŒ‰éœ€åŠ è½½"
        },
        "eager": {
          "description": "æ€¥åŠ è½½",
          "implementation": "å…³è”æŸ¥è¯¢",
          "warning": "æ³¨æ„N+1æŸ¥è¯¢é—®é¢˜"
        }
      },
      "batchOperations": {
        "batchInsert": "ä½¿ç”¨saveBatch()æ‰¹é‡æ’å…¥",
        "batchUpdate": "ä½¿ç”¨updateBatchById()æ‰¹é‡æ›´æ–°",
        "batchSize": "100æ¡/æ‰¹",
        "example": "userService.saveBatch(userList, 100);"
      },
      "monitoring": {
        "metrics": ["QPS", "å“åº”æ—¶é—´", "é”™è¯¯ç‡", "èµ„æºä½¿ç”¨ç‡"],
        "tools": ["Spring Actuator", "Prometheus", "Grafana"],
        "endpoints": ["/actuator/metrics", "/actuator/health"]
      }
    },
    "codeExamples": {
      "utilityClasses": {
        "ResultUtils": {
          "description": "ç»Ÿä¸€å“åº”æ„å»ºå·¥å…·",
          "methods": ["success()", "success(T data)", "error(String message)", "error(Integer code, String message)"],
          "example": "Result.success(user);\nResult.error(\"å‚æ•°é”™è¯¯\");"
        },
        "PageUtils": {
          "description": "åˆ†é¡µæ„å»ºå·¥å…·",
          "methods": ["buildPage(Page<T> page)"],
          "example": "Page<User> page = new Page<>(1, 10);\nreturn PageUtils.buildPage(page);"
        },
        "SecurityUtils": {
          "description": "å®‰å…¨ç›¸å…³å·¥å…·",
          "methods": ["getCurrentUserId()", "getCurrentUser()", "isLogin()"],
          "example": "Long userId = SecurityUtils.getCurrentUserId();"
        },
        "DateUtils": {
          "description": "æ—¥æœŸæ ¼å¼åŒ–å·¥å…·",
          "methods": ["format(LocalDateTime)", "parse(String)"],
          "example": "DateUtils.format(LocalDateTime.now(), \"yyyy-MM-dd HH:mm:ss\");"
        }
      },
      "businessScenarios": {
        "userAuthentication": {
          "description": "ç”¨æˆ·ç™»å½•æµç¨‹ç¤ºä¾‹",
          "steps": ["å‚æ•°æ ¡éªŒ", "æŸ¥è¯¢ç”¨æˆ·", "éªŒè¯å¯†ç ", "åˆ›å»ºä¼šè¯", "è¿”å›Token"],
          "service": "AuthService.java"
        },
        "permissionCheck": {
          "description": "æƒé™æ ¡éªŒç¤ºä¾‹",
          "annotation": "@SaCheckPermission(\"user:list\")",
          "service": "UserRoleService.java"
        },
        "dataValidation": {
          "description": "å‚æ•°æ ¡éªŒç¤ºä¾‹",
          "validation": "@Valid @RequestBody LoginRequest request",
          "handler": "GlobalExceptionHandler"
        },
        "paginatedQuery": {
          "description": "åˆ†é¡µæŸ¥è¯¢ç¤ºä¾‹",
          "service": "DocumentService.java",
          "mapper": "DocumentMapper.java"
        }
      },
      "complexQueries": {
        "lambdaQuery": {
          "description": "æ¡ä»¶æ„é€ å™¨ä½¿ç”¨",
          "example": "LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<>();\nwrapper.like(User::getUsername, \"test\")\n       .eq(User::getStatus, 1)\n       .orderByDesc(User::getCreatedTime);"
        },
        "multiTableJoin": {
          "description": "å…³è”æŸ¥è¯¢ç¤ºä¾‹",
          "example": "userMapper.selectList(new LambdaQueryWrapper<User>()\n    .inSql(User::getId, \"SELECT user_id FROM user_role WHERE role_id = 1\"));"
        },
        "fulltextSearch": {
          "description": "æ··åˆæœç´¢ç¤ºä¾‹",
          "service": "VectorService.java",
          "method": "hybridSearch(String keyword, Long kbId, Integer topK)"
        }
      },
      "thirdPartyIntegration": {
        "dashscope": {
          "description": "AIæ¨¡å‹è°ƒç”¨ç¤ºä¾‹",
          "service": "VectorService.java",
          "methods": ["embed(String text)", "chat(List<ChatMessage> messages)"],
          "configuration": "spring.ai.dashscope.api-key"
        },
        "seekdb": {
          "description": "å‘é‡å­˜å‚¨ç¤ºä¾‹",
          "service": "VectorServiceImpl.java",
          "methods": ["saveVector(DocumentVector vector)", "search(Vector vector, Integer topK)"],
          "configuration": "SeekDBConfig.java"
        },
        "minio": {
          "description": "æ–‡ä»¶å­˜å‚¨ç¤ºä¾‹",
          "service": "MinioService.java",
          "methods": ["upload(MultipartFile file)", "download(String objectName)"],
          "configuration": "MinioConfig.java"
        }
      }
    }
  },
  "developmentWorkflows": {
    "createNewApi": {
      "steps": [
        "1. åˆ›å»ºEntityç±»ï¼ˆåœ¨entityåŒ…ä¸‹ï¼Œç»§æ‰¿BaseEntityï¼‰",
        "2. åˆ›å»ºMapperæ¥å£ï¼ˆåœ¨repositoryåŒ…ä¸‹ï¼Œç»§æ‰¿BaseMapper<Entity>ï¼‰",
        "3. åˆ›å»ºServiceæ¥å£ï¼ˆåœ¨serviceåŒ…ä¸‹ï¼Œç»§æ‰¿IService<Entity>ï¼‰",
        "4. åˆ›å»ºServiceImplå®ç°ç±»ï¼ˆåœ¨service/implåŒ…ä¸‹ï¼Œç»§æ‰¿ServiceImplï¼‰",
        "5. åˆ›å»ºControllerç±»ï¼ˆåœ¨controlleråŒ…ä¸‹ï¼Œæ·»åŠ @RestControllerå’Œ@RequestMappingï¼‰",
        "6. æ·»åŠ æ•°æ®åº“è¡¨ç»“æ„ï¼ˆå¦‚éœ€è¦ï¼Œåœ¨sqlç›®å½•ä¸‹åˆ›å»ºDDLï¼‰",
        "7. æµ‹è¯•APIæ¥å£ï¼ˆä½¿ç”¨Knife4jæ–‡æ¡£æˆ–Postmanï¼‰"
      ],
      "templates": {
        "entity": "package com.police.kb.entity;\n\nimport com.baomidou.mybatisplus.annotation.*;\nimport lombok.Data;\nimport java.time.LocalDateTime;\n\n/**\n * å®ä½“ç±»æè¿°\n * <p>è¯¦ç»†æè¿°</p>\n * @author é»„ä¿Š\n * @date 2026-01-31 10:00:00\n */\n@Data\n@TableName(\"your_table\")\npublic class YourEntity extends BaseEntity {\n    // å­—æ®µå®šä¹‰\n    private String name;\n    private Integer status;\n}",
        "mapper": "package com.police.kb.repository;\n\nimport com.baomidou.mybatisplus.core.mapper.BaseMapper;\nimport com.police.kb.entity.YourEntity;\nimport org.apache.ibatis.annotations.Mapper;\n\n/**\n * Mapperæ¥å£æè¿°\n * @author é»„ä¿Š\n * @date 2026-01-31 10:00:00\n */\n@Mapper\npublic interface YourEntityMapper extends BaseMapper<YourEntity> {\n}",
        "service": "package com.police.kb.service;\n\nimport com.baomidou.mybatisplus.extension.service.IService;\nimport com.police.kb.entity.YourEntity;\n\n/**\n * æœåŠ¡æ¥å£æè¿°\n * @author é»„ä¿Š\n * @date 2026-01-31 10:00:00\n */\npublic interface YourEntityService extends IService<YourEntity> {\n    // ä¸šåŠ¡æ–¹æ³•\n    YourEntity getByName(String name);\n}",
        "serviceImpl": "package com.police.kb.service.impl;\n\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\nimport com.police.kb.entity.YourEntity;\nimport com.police.kb.repository.YourEntityMapper;\nimport com.police.kb.service.YourEntityService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Service;\n\n/**\n * æœåŠ¡å®ç°ç±»æè¿°\n * @author é»„ä¿Š\n * @date 2026-01-31 10:00:00\n */\n@Service\n@RequiredArgsConstructor\npublic class YourEntityServiceImpl extends ServiceImpl<YourEntityMapper, YourEntity> implements YourEntityService {\n    \n    @Override\n    public YourEntity getByName(String name) {\n        return this.lambdaQuery()\n            .eq(YourEntity::getName, name)\n            .one();\n    }\n}",
        "controller": "package com.police.kb.controller;\n\nimport com.police.kb.common.Result;\nimport com.police.kb.service.YourEntityService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.*;\n\n/**\n * æ§åˆ¶å™¨æè¿°\n * @author é»„ä¿Š\n * @date 2026-01-31 10:00:00\n */\n@RestController\n@RequestMapping(\"/api/v1/your-entity\")\n@RequiredArgsConstructor\npublic class YourEntityController {\n    \n    private final YourEntityService yourEntityService;\n    \n    /**\n     * è·å–å®ä½“è¯¦æƒ…\n     * @param id å®ä½“ID\n     * @return å®ä½“ä¿¡æ¯\n     */\n    @GetMapping(\"/{id}\")\n    public Result<YourEntity> getById(@PathVariable Long id) {\n        YourEntity entity = yourEntityService.getById(id);\n        return Result.success(entity);\n    }\n}"
      }
    },
    "addAuthentication": {
      "framework": "Sa-Token",
      "methods": {
        "checkLogin": "StpUtil.isLogin()",
        "getUserId": "StpUtil.getLoginIdAsLong()",
        "login": "StpUtil.login(userId, deviceType)",
        "logout": "StpUtil.logout()",
        "getTokenInfo": "StpUtil.getTokenInfo()"
      },
      "annotations": {
        "@SaCheckLogin": "æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•",
        "@SaCheckPermission(\"code\")": "æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æŒ‡å®šæƒé™"
      },
      "example": "@GetMapping(\"/info\")\n@SaCheckLogin\npublic Result<UserInfoDTO> getCurrentUserInfo() {\n    Long userId = StpUtil.getLoginIdAsLong();\n    // ä¸šåŠ¡é€»è¾‘\n}"
    },
    "handleException": {
      "globalHandler": "GlobalExceptionHandler.java",
      "customException": "åœ¨commonåŒ…åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»",
      "errorCodes": "åœ¨ErrorCode.javaä¸­å®šä¹‰é”™è¯¯ç å¸¸é‡",
      "example": "public class BusinessException extends RuntimeException {\n    private Integer code;\n    \n    public BusinessException(String message) {\n        super(message);\n        this.code = 500;\n    }\n    \n    public BusinessException(Integer code, String message) {\n        super(message);\n        this.code = code;\n    }\n}"
    }
  },
  "commonPatterns": {
    "resultResponse": {
      "description": "ç»Ÿä¸€å“åº”ç»“æœç±»",
      "class": "Result.java",
      "usage": [
        "Result.success() - æ— æ•°æ®æˆåŠŸå“åº”",
        "Result.success(T data) - å¸¦æ•°æ®æˆåŠŸå“åº”",
        "Result.success(String message, T data) - è‡ªå®šä¹‰æ¶ˆæ¯æˆåŠŸå“åº”",
        "Result.error() - æ— æ•°æ®å¤±è´¥å“åº”",
        "Result.error(String message) - å¸¦æ¶ˆæ¯å¤±è´¥å“åº”",
        "Result.error(Integer code, String message) - è‡ªå®šä¹‰çŠ¶æ€ç å¤±è´¥å“åº”"
      ]
    },
    "pagination": {
      "description": "åˆ†é¡µæŸ¥è¯¢",
      "implementation": "ä½¿ç”¨MyBatis-Plus Pageç±»",
      "example": "Page<Document> page = new Page<>(pageNum, pageSize);\nIPage<Document> result = documentMapper.selectPage(page, wrapper);",
      "wrapper": "LambdaQueryWrapper<Document>"
    },
    "transaction": {
      "description": "äº‹åŠ¡ç®¡ç†",
      "annotation": "@Transactional",
      "properties": {
        "propagation": "ä¼ æ’­è¡Œä¸º",
        "rollbackFor": "å›æ»šå¼‚å¸¸ç±»å‹",
        "timeout": "è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰"
      },
      "example": "@Transactional(rollbackFor = Exception.class)\npublic void batchInsert(List<User> users) {\n    userService.saveBatch(users);\n}"
    },
    "cache": {
      "description": "Redisç¼“å­˜",
      "configuration": "RedisConfig.java",
      "usage": "æ³¨å…¥StringRedisTemplate",
      "example": "redisTemplate.opsForValue().set(key, value, timeout, unit);"
    }
  },
  "configurationReference": {
    "applicationYml": {
      "server": {
        "port": "æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤8080ï¼‰"
      },
      "spring": {
        "application": {
          "name": "åº”ç”¨åç§°"
        },
        "datasource": {
          "url": "æ•°æ®åº“è¿æ¥URL",
          "username": "æ•°æ®åº“ç”¨æˆ·å",
          "password": "æ•°æ®åº“å¯†ç ",
          "driverClassName": "é©±åŠ¨ç±»å"
        },
        "data": {
          "redis": {
            "host": "Redisä¸»æœº",
            "port": "Redisç«¯å£",
            "database": "æ•°æ®åº“ç¼–å·"
          }
        },
        "servlet": {
          "multipart": {
            "maxFileSize": "å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°",
            "maxRequestSize": "è¯·æ±‚æœ€å¤§å¤§å°"
          }
        }
      },
      "mybatisPlus": {
        "mapperLocations": "Mapper XMLæ–‡ä»¶ä½ç½®",
        "typeAliasesPackage": "å®ä½“ç±»åŒ…è·¯å¾„",
        "globalConfig": {
          "dbConfig": {
            "idType": "ä¸»é”®ç­–ç•¥",
            "logicDeleteField": "é€»è¾‘åˆ é™¤å­—æ®µ"
          }
        }
      },
      "saToken": {
        "tokenName": "Tokenåç§°",
        "tokenPrefix": "Tokenå‰ç¼€",
        "timeout": "Tokenæœ‰æ•ˆæœŸï¼ˆç§’ï¼‰",
        "jwtSecretKey": "JWTå¯†é’¥"
      },
      "knife4j": {
        "enable": "æ˜¯å¦å¯ç”¨",
        "setting": {
          "language": "è¯­è¨€"
        }
      }
    },
    "seekdb": {
      "host": "SeekDBæœåŠ¡å™¨åœ°å€",
      "port": "SeekDBç«¯å£",
      "username": "ç”¨æˆ·å",
      "password": "å¯†ç ",
      "database": "æ•°æ®åº“å",
      "collection": "é›†åˆåç§°",
      "dimension": "å‘é‡ç»´åº¦",
      "metric": "ç›¸ä¼¼åº¦è®¡ç®—æ–¹å¼"
    },
    "ai": {
      "springAiDashscope": {
        "apiKey": "DashScope APIå¯†é’¥",
        "enabled": "æ˜¯å¦å¯ç”¨"
      },
      "seekdbAi": {
        "apiUrl": "åµŒå…¥æ¨¡å‹APIåœ°å€",
        "apiKey": "APIå¯†é’¥",
        "modelName": "åµŒå…¥æ¨¡å‹åç§°"
      }
    },
    "minio": {
      "endpoint": "MinIOæœåŠ¡åœ°å€",
      "accessKey": "è®¿é—®å¯†é’¥",
      "secretKey": "å¯†é’¥",
      "bucket": "é»˜è®¤æ¡¶åç§°"
    },
    "rag": {
      "retrieval": {
        "topk": "æ£€ç´¢è¿”å›æ•°é‡",
        "similarityThreshold": "ç›¸ä¼¼åº¦é˜ˆå€¼"
      },
      "chunking": {
        "strategy": "åˆ†å—ç­–ç•¥",
        "chunkSize": "åˆ†å—å¤§å°",
        "chunkOverlap": "åˆ†å—é‡å "
      }
    }
  },
  "buildAndRun": {
    "compile": {
      "command": "mvn clean compile",
      "description": "ç¼–è¯‘é¡¹ç›®"
    },
    "run": {
      "command": "mvn spring-boot:run",
      "description": "å¯åŠ¨åº”ç”¨"
    },
    "package": {
      "command": "mvn package -DskipTests",
      "description": "æ‰“åŒ…é¡¹ç›®"
    },
    "runJar": {
      "command": "java -jar target/police-kb-1.0.0.jar",
      "description": "è¿è¡ŒJARåŒ…"
    },
    "test": {
      "command": "mvn test",
      "description": "è¿è¡Œæµ‹è¯•"
    },
    "apiDocs": {
      "url": "http://localhost:8080/doc.html",
      "description": "Knife4j APIæ–‡æ¡£åœ°å€"
    },
    "profiles": {
      "dev": "å¼€å‘ç¯å¢ƒ",
      "test": "æµ‹è¯•ç¯å¢ƒ",
      "prod": "ç”Ÿäº§ç¯å¢ƒ"
    }
  },
  "gitCommitConvention": {
    "types": [
      {
        "type": "feat",
        "description": "æ–°åŠŸèƒ½",
        "emoji": "âœ¨"
      },
      {
        "type": "fix",
        "description": "Bugä¿®å¤",
        "emoji": "ğŸ›"
      },
      {
        "type": "docs",
        "description": "æ–‡æ¡£æ›´æ–°",
        "emoji": "ğŸ“"
      },
      {
        "type": "style",
        "description": "ä»£ç æ ¼å¼è°ƒæ•´",
        "emoji": "ğŸ’„"
      },
      {
        "type": "refactor",
        "description": "é‡æ„",
        "emoji": "â™»ï¸"
      },
      {
        "type": "test",
        "description": "æµ‹è¯•ç›¸å…³",
        "emoji": "âœ…"
      },
      {
        "type": "chore",
        "description": "æ„å»º/å·¥å…·ç›¸å…³",
        "emoji": "ğŸ”§"
      },
      {
        "type": "perf",
        "description": "æ€§èƒ½ä¼˜åŒ–",
        "emoji": "âš¡ï¸"
      },
      {
        "type": "build",
        "description": "æ„å»ºç³»ç»Ÿ",
        "emoji": "ğŸ“¦"
      },
      {
        "type": "ci",
        "description": "CIé…ç½®",
        "emoji": "ğŸ‘·"
      }
    ],
    "format": "<type>(<scope>): <subject>",
    "example": "feat(user): æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½\n\n- å®ç°ç”¨æˆ·åå¯†ç ç™»å½•\n- é›†æˆSa-Tokenè®¤è¯\n- æ·»åŠ Tokenåˆ·æ–°æœºåˆ¶",
    "branch": {
      "main": "ä¸»åˆ†æ”¯",
      "develop": "å¼€å‘åˆ†æ”¯",
      "feature/*": "åŠŸèƒ½åˆ†æ”¯",
      "hotfix/*": "ç´§æ€¥ä¿®å¤åˆ†æ”¯",
      "release/*": "å‘å¸ƒåˆ†æ”¯"
    }
  },
  "documentation": {
    "officialDocs": {
      "springAiAlibaba": {
        "url": "https://java2ai.com/",
        "description": "Spring AI Alibabaå®˜æ–¹æ–‡æ¡£ - AIèƒ½åŠ›é›†æˆæŒ‡å—"
      },
      "oceanbaseSeekdb": {
        "url": "https://www.oceanbase.ai/zh-CN",
        "description": "OceanBase SeekDBå®˜æ–¹æ–‡æ¡£ - å‘é‡æ•°æ®åº“é…ç½®å’Œä½¿ç”¨"
      },
      "mybatisPlus": {
        "url": "https://baomidou.com/",
        "description": "MyBatis-Pluså®˜æ–¹æ–‡æ¡£ - ORMæ¡†æ¶ä½¿ç”¨æŒ‡å—"
      },
      "saToken": {
        "url": "https://sa-token.dev33.cn/",
        "description": "Sa-Tokenå®˜æ–¹æ–‡æ¡£ - è®¤è¯æˆæƒæ¡†æ¶æ–‡æ¡£"
      },
      "knife4j": {
        "url": "https://doc.xiaominfo.com/",
        "description": "Knife4jå®˜æ–¹æ–‡æ¡£ - APIæ¥å£æ–‡æ¡£ç”Ÿæˆ"
      },
      "springBoot": {
        "url": "https://spring.io/projects/spring-boot",
        "description": "Spring Bootå®˜æ–¹æ–‡æ¡£"
      }
    },
    "versionCompatibility": {
      "notes": [
        "Spring Boot 3.x éœ€è¦é…åˆ Sa-Token Spring Boot 3 Starter",
        "Spring AI Alibaba ç‰ˆæœ¬éœ€ä¸ Spring AI ç‰ˆæœ¬å…¼å®¹",
        "SeekDB HNSWç´¢å¼•å‚æ•°é…ç½®å‚è€ƒå®˜æ–¹æ¨èå€¼",
        "MyBatis-Plus 3.5+ æ”¯æŒlambdaè¡¨è¾¾å¼æŸ¥è¯¢"
      ]
    },
    "developmentGuidelines": [
      "å¼€å‘å‰æŸ¥é˜…ç›¸å…³æŠ€æœ¯çš„å®˜æ–¹æ–‡æ¡£",
      "äº†è§£ç‰ˆæœ¬å…¼å®¹æ€§å’Œå·²çŸ¥é—®é¢˜",
      "é‡åˆ°é—®é¢˜æ—¶ä¼˜å…ˆæŸ¥é˜…å®˜æ–¹æ–‡æ¡£",
      "æŸ¥çœ‹APIæ¥å£è¯´æ˜å’Œç¤ºä¾‹ä»£ç "
    ]
  }
}